var red_path = [
    {top: "0px", left:"0px"},
    {top: "248px", left: "48px"},
    {top: "248px", left:"88px"},
    {top: "248px", left: "128px"},
    {top: "248px", left: "168px"},
    {top: "248px", left: "208px"},
    {top: "208px", left: "248px"},
    {top: "168px", left: "248px"},
    {top: "128px", left: "248px"},
    {top: "88px", left: "248px"},
    {top: "48px", left: "248px"},
    {top: "8px", left: "248px"},
    {top: "8px", left: "288px"},
    {top: "8px", left: "328px"},
    {top: "48px", left: "328px"},
    {top: "88px", left: "328px"},
    {top: "128px", left: "328px"},
    {top: "168px", left: "328px"},
    {top: "208px", left: "328px"},
    {top: "248px", left: "368px"},
    {top: "248px", left: "408px"},
    {top: "248px", left: "448px"},
    {top: "248px", left: "488px"},
    {top: "248px", left: "528px"},
    {top: "248px", left: "568px"},
    {top: "288px", left: "568px"},
    {top: "328px", left: "568px"},
    {top: "328px", left: "528px"},
    {top: "328px", left: "488px"},
    {top: "328px", left: "448px"},
    {top: "328px", left: "408px"},
    {top: "328px", left: "368px"},
    {top: "368px", left: "328px"},
    {top: "408px", left: "328px"},
    {top: "448px", left: "328px"},
    {top: "488px", left: "328px"},
    {top: "528px", left: "328px"},
    {top: "568px", left: "328px"},
    {top: "568px", left: "288px"},
    {top: "568px", left: "248px"},
    {top: "528px", left: "248px"},
    {top: "488px", left: "248px"},
    {top: "448px", left: "248px"},
    {top: "408px", left: "248px"},
    {top: "368px", left: "248px"},
    {top: "328px", left: "208px"},
    {top: "328px", left: "168px"},
    {top: "328px", left: "128px"},
    {top: "328px", left: "88px"},
    {top: "328px", left: "48px"},
    {top: "328px", left: "8px"},
    {top: "288px", left: "8px"},
    {top: "288px", left: "48px"},
    {top: "288px", left: "88px"},
    {top: "288px", left: "128px"},
    {top: "288px", left: "168px"},
    {top: "288px", left: "208px"}
];

var blue_path= [
    {top: "0px", left:"0px"},
    {top: "48px", left: "328px"},
    {top: "88px", left: "328px"},
    {top: "128px", left: "328px"},
    {top: "168px", left: "328px"},
    {top: "208px", left: "328px"},
    {top: "248px", left: "368px"},
    {top: "248px", left: "408px"},
    {top: "248px", left: "448px"},
    {top: "248px", left: "488px"},
    {top: "248px", left: "528px"},
    {top: "248px", left: "568px"},
    {top: "288px", left: "568px"},
    {top: "328px", left: "568px"},
    {top: "328px", left: "528px"},
    {top: "328px", left: "488px"},
    {top: "328px", left: "448px"},
    {top: "328px", left: "408px"},
    {top: "328px", left: "368px"},
    {top: "368px", left: "328px"},
    {top: "408px", left: "328px"},
    {top: "448px", left: "328px"},
    {top: "488px", left: "328px"},
    {top: "528px", left: "328px"},
    {top: "568px", left: "328px"},
    {top: "568px", left: "288px"},
    {top: "568px", left: "248px"},
    {top: "528px", left: "248px"},
    {top: "488px", left: "248px"},
    {top: "448px", left: "248px"},
    {top: "408px", left: "248px"},
    {top: "368px", left: "248px"},
    {top: "328px", left: "208px"},
    {top: "328px", left: "168px"},
    {top: "328px", left: "128px"},
    {top: "328px", left: "88px"},
    {top: "328px", left: "48px"},
    {top: "328px", left: "8px"},
    {top: "288px", left: "8px"},
    {top: "248px", left: "8px"},
    {top: "248px", left: "48px"},
    {top: "248px", left:"88px"},
    {top: "248px", left: "128px"},
    {top: "248px", left: "168px"},
    {top: "248px", left: "208px"},
    {top: "208px", left: "248px"},
    {top: "168px", left: "248px"},
    {top: "128px", left: "248px"},
    {top: "88px", left: "248px"},
    {top: "48px", left: "248px"},
    {top: "8px", left: "248px"},
    {top: "8px", left: "288px"},
    {top: "48px", left: "288px"},
    {top: "88px", left: "288px"},
    {top: "128px", left: "288px"},
    {top: "168px", left: "288px"},
    {top: "208px", left: "288px"}
];

var yellow_path=[
    {top: "0px", left:"0px"},
    {top: "328px", left: "528px"},
    {top: "328px", left: "488px"},
    {top: "328px", left: "448px"},
    {top: "328px", left: "408px"},
    {top: "328px", left: "368px"},
    {top: "368px", left: "328px"},
    {top: "408px", left: "328px"},
    {top: "448px", left: "328px"},
    {top: "488px", left: "328px"},
    {top: "528px", left: "328px"},
    {top: "568px", left: "328px"},
    {top: "568px", left: "288px"},
    {top: "568px", left: "248px"},
    {top: "528px", left: "248px"},
    {top: "488px", left: "248px"},
    {top: "448px", left: "248px"},
    {top: "408px", left: "248px"},
    {top: "368px", left: "248px"},
    {top: "328px", left: "208px"},
    {top: "328px", left: "168px"},
    {top: "328px", left: "128px"},
    {top: "328px", left: "88px"},
    {top: "328px", left: "48px"},
    {top: "328px", left: "8px"},
    {top: "288px", left: "8px"},
    {top: "248px", left: "8px"},
    {top: "248px", left: "48px"},
    {top: "248px", left:"88px"},
    {top: "248px", left: "128px"},
    {top: "248px", left: "168px"},
    {top: "248px", left: "208px"},
    {top: "208px", left: "248px"},
    {top: "168px", left: "248px"},
    {top: "128px", left: "248px"},
    {top: "88px", left: "248px"},
    {top: "48px", left: "248px"},
    {top: "8px", left: "248px"},
    {top: "8px", left: "288px"},
    {top: "8px", left: "328px"},
    {top: "48px", left: "328px"},
    {top: "88px", left: "328px"},
    {top: "128px", left: "328px"},
    {top: "168px", left: "328px"},
    {top: "208px", left: "328px"},
    {top: "248px", left: "368px"},
    {top: "248px", left: "408px"},
    {top: "248px", left: "448px"},
    {top: "248px", left: "488px"},
    {top: "248px", left: "528px"},
    {top: "248px", left: "568px"},
    {top: "288px", left: "568px"},
    {top: "288px", left: "528px"},
    {top: "288px", left: "488px"},
    {top: "288px", left: "448px"},
    {top: "288px", left: "408px"},
    {top: "288px", left: "368px"}
];

var green_path=[
    {top: "0px", left: "0px"},
    {top: "528px", left: "248px"},
    {top: "488px", left: "248px"},
    {top: "448px", left: "248px"},
    {top: "408px", left: "248px"},
    {top: "368px", left: "248px"},
    {top: "328px", left: "208px"},
    {top: "328px", left: "168px"},
    {top: "328px", left: "128px"},
    {top: "328px", left: "88px"},
    {top: "328px", left: "48px"},
    {top: "328px", left: "8px"},
    {top: "288px", left: "8px"},
    {top: "248px", left: "8px"},
    {top: "248px", left: "48px"},
    {top: "248px", left:"88px"},
    {top: "248px", left: "128px"},
    {top: "248px", left: "168px"},
    {top: "248px", left: "208px"},
    {top: "208px", left: "248px"},
    {top: "168px", left: "248px"},
    {top: "128px", left: "248px"},
    {top: "88px", left: "248px"},
    {top: "48px", left: "248px"},
    {top: "8px", left: "248px"},
    {top: "8px", left: "288px"},
    {top: "8px", left: "328px"},
    {top: "48px", left: "328px"},
    {top: "88px", left: "328px"},
    {top: "128px", left: "328px"},
    {top: "168px", left: "328px"},
    {top: "208px", left: "328px"},
    {top: "248px", left: "368px"},
    {top: "248px", left: "408px"},
    {top: "248px", left: "448px"},
    {top: "248px", left: "488px"},
    {top: "248px", left: "528px"},
    {top: "248px", left: "568px"},
    {top: "288px", left: "568px"},
    {top: "328px", left: "568px"},
    {top: "328px", left: "528px"},
    {top: "328px", left: "488px"},
    {top: "328px", left: "448px"},
    {top: "328px", left: "408px"},
    {top: "328px", left: "368px"},
    {top: "368px", left: "328px"},
    {top: "408px", left: "328px"},
    {top: "448px", left: "328px"},
    {top: "488px", left: "328px"},
    {top: "528px", left: "328px"},
    {top: "568px", left: "328px"},
    {top: "568px", left: "288px"},
    {top: "528px", left: "288px"},
    {top: "488px", left: "288px"},
    {top: "448px", left: "288px"},
    {top: "408px", left: "288px"},
    {top: "368px", left: "288px"}
];

var path = [red_path, blue_path, yellow_path, green_path];

var home_position = [
    {top: "70px", left: "70px"},
    {top: "70px", left: "140px"},
    {top: "140px", left: "70px"},
    {top: "140px", left: "140px"},
    {top: "70px", left: "505px"},
    {top: "70px", left: "435px"},
    {top: "140px", left: "505px"},
    {top: "140px", left: "435px"},
    {top: "505px", left: "505px"},
    {top: "505px", left: "435px"},
    {top: "435px", left: "505px"},
    {top: "435px", left: "435px"},
    {top: "505px", left: "70px"},
    {top: "505px", left: "140px"},
    {top: "435px", left: "70px"},
    {top: "435px", left: "140px"}
]

var goal_position = [
    {top: "288px", left: "259px"},
    {top: "275px", left: "248px"},
    {top: "301px", left: "248px"},
    {top: "288px", left: "242px"},
    {top: "259px", left: "288px"},
    {top: "250px", left: "305px"},
    {top: "250px", left: "271px"},
    {top: "242px", left: "288px"},
    {top: "288px", left: "315px"},
    {top: "275px", left: "325px"},
    {top: "301px", left: "325px"},
    {top: "288px", left: "330px"},
    {top: "315px", left: "288px"},
    {top: "325px", left: "305px"},
    {top: "325px", left: "271px"},
    {top: "332px", left: "288px"},
]

var dice_number;

var piece_value;

var chance; 

window.onload = disable;

function disable(){
    document.getElementById("dice").disabled = true;
}
    

function start_game(){
    piece_value = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
    chance = 4;
    document.getElementById("start").disabled = true;
    document.getElementById("dice").disabled = false;
};

function generate_number(){

    var piece = [
        document.getElementById("r1"),
        document.getElementById("r2"),
        document.getElementById("r3"),
        document.getElementById("r4"),
        document.getElementById("b1"),
        document.getElementById("b2"),
        document.getElementById("b3"),
        document.getElementById("b4"),
        document.getElementById("y1"),
        document.getElementById("y2"),
        document.getElementById("y3"),
        document.getElementById("y4"),
        document.getElementById("g1"),
        document.getElementById("g2"),
        document.getElementById("g3"),
        document.getElementById("g4"),
    ];

    dice_number = Math.floor((Math.random() * 6) + 1);

    document.getElementById("field").innerHTML = dice_number;

    function ClassFunc(x,y,z){
        piece[x].classList.remove(y);
        piece[x].classList.add(z);
    };

    function checkLock(x){
        var test = 0;
        for(i=0; i<4; i++){
            if(piece[i+x].classList.contains("lock")){
                test += 1;
            }
            else if(piece_value[i+x] + dice_number >= 57){
                test += 1;
            }
        }
        if(test == 4){
            return 1;
        }
        else{
            return 0;
        }
    }


    function rollingDice(x,y){
        for(i=x; i<(x+4); i++){
            ClassFunc(i, "inactive", "active");
        };
        document.getElementById("field").style.borderColor = y;
        if(dice_number < 6){
            var check = checkLock(x);
            if(check == 1){
                chance += 1;
                document.getElementById("field").innerHTML += ":  No pieces to play.<br>Roll the dice again.";
                for(i=x; i<(x+4); i++){
                    ClassFunc(i, "active", "inactive")
                }
            }
            else if(check == 0){chance += 1;}
        };
    }
    switch(chance%4){
        case 0:
            rollingDice(0,"red");
            break;
        case 1:
            rollingDice(4,"blue");
            break;
        case 2:
            rollingDice(8,"yellow");
            break;
        case 3:
            rollingDice(12,"green");
            break;
        default:
            alert("hehehe")
    };
};

function change_position(x) {

    var piece = [
        document.getElementById("r1"),
        document.getElementById("r2"),
        document.getElementById("r3"),
        document.getElementById("r4"),
        document.getElementById("b1"),
        document.getElementById("b2"),
        document.getElementById("b3"),
        document.getElementById("b4"),
        document.getElementById("y1"),
        document.getElementById("y2"),
        document.getElementById("y3"),
        document.getElementById("y4"),
        document.getElementById("g1"),
        document.getElementById("g2"),
        document.getElementById("g3"),
        document.getElementById("g4"),
    ];

    function changeClassFunc(x,y,z){
        piece[x].classList.remove(y);
        piece[x].classList.add(z);
    }

    function sendHome(x){
        piece[x].style.top = home_position[x].top;
        piece[x].style.left = home_position[x].left;
        changeClassFunc(x, "unlock", "lock");
        chance -= 1;
        document.getElementById("field").innerHTML = "YAY!! Bonus Chance!";
    }

    function kataFunctionAgain(x,y,z){
        for(i=0; i<4; i++){
            if(x == (piece_value[i + y] - z)){
                sendHome(i+y);
            }
        }
    };

    function kataFunction(value, index){
        if(value == 9){}
        else if(value == 14){}
        else if(value == 22){}
        else if(value == 27){}
        else if(value == 35){}
        else if(value == 40){}
        else if(value == 48){}
        else if(value<14){
            switch(index){
                case 0:
                    kataFunctionAgain(value,4,39);
                    kataFunctionAgain(value,8,26);
                    kataFunctionAgain(value,12,13);
                    break;
                case 1:
                    kataFunctionAgain(value,8,39);
                    kataFunctionAgain(value,12,26);
                    kataFunctionAgain(value,0,13);
                    break;
                case 2:
                    kataFunctionAgain(value,12,39);
                    kataFunctionAgain(value,0,26);
                    kataFunctionAgain(value,4,13);
                    break;
                case 3:
                    kataFunctionAgain(value,0,39);
                    kataFunctionAgain(value,4,26);
                    kataFunctionAgain(value,8,13);
                    break;
                default:
                    alert("ye function hi ghatiya h");
            }
        }
        else if(value<27){
            switch(index){
                case 0:
                    kataFunctionAgain(value,4,-13);
                    kataFunctionAgain(value,8,26);
                    kataFunctionAgain(value,12,13);
                    break;
                case 1:
                    kataFunctionAgain(value,8,-13);
                    kataFunctionAgain(value,12,26);
                    kataFunctionAgain(value,0,13);
                    break;
                case 2:
                    kataFunctionAgain(value,12,-13);
                    kataFunctionAgain(value,0,26);
                    kataFunctionAgain(value,4,13);
                    break;
                case 3:
                    kataFunctionAgain(value,0,-13);
                    kataFunctionAgain(value,4,26);
                    kataFunctionAgain(value,8,13);
                    break;
            }
        }
        else if(value<40){
            switch(index){
                case 0:
                    kataFunctionAgain(value,4,-13);
                    kataFunctionAgain(value,8,-26);
                    kataFunctionAgain(value,12,13);
                    break;
                case 1:
                    kataFunctionAgain(value,8,-13);
                    kataFunctionAgain(value,12,-26);
                    kataFunctionAgain(value,0,13);
                    break;
                case 2:
                    kataFunctionAgain(value,12,-13);
                    kataFunctionAgain(value,0,-26);
                    kataFunctionAgain(value,4,13);
                    break;
                case 3:
                    kataFunctionAgain(value,0,-13);
                    kataFunctionAgain(value,4,-26);
                    kataFunctionAgain(value,8,13);
                    break;
            }
        }
        else if(value<52){
            switch(index){
                case 0:
                    kataFunctionAgain(value,4,-13);
                    kataFunctionAgain(value,8,-26);
                    kataFunctionAgain(value,12,-39);
                    break;
                case 1:
                    kataFunctionAgain(value,8,-13);
                    kataFunctionAgain(value,12,-26);
                    kataFunctionAgain(value,0,-39);
                    break;
                case 2:
                    kataFunctionAgain(value,12,-13);
                    kataFunctionAgain(value,0,-26);
                    kataFunctionAgain(value,4,-39);
                    break;
                case 3:
                    kataFunctionAgain(value,0,-13);
                    kataFunctionAgain(value,4,-26);
                    kataFunctionAgain(value,8,-39);
                    break;
            }
        }
    };
 
    function actualChange(index, index_two){
        if(piece[index].classList.contains("active") && piece[index].classList.contains("lock") && dice_number == 6){
            piece_value[index] = 1;
            piece[index].style.top = path[index_two][piece_value[index]].top;
            piece[index].style.left = path[index_two][piece_value[index]].left;
            changeClassFunc(index, "lock", "unlock");
            for(i=0; i<4; i++){
                changeClassFunc((i + (index_two*4)), "active", "inactive");
            };
        }
        else if(piece[index].classList.contains("active") && piece[index].classList.contains("unlock")){
            var iterations = 0;
            var value=piece_value[index];
            value += dice_number;
            if(value == 5 || value == 18 || value == 31 || value == 44){
                dice_number+=1;
                value+=1;
                chance -=1;
                document.getElementById("field").innerHTML = "YAY!! Bonus Chance!"
            }
            else if(value == 49){
                dice_number+=3;
                value+=3;
                chance -=1;
                document.getElementById("field").innerHTML = "YAY!! Bonus Chance!"
            }
            var move = setInterval(addValue,300)
            
            function addValue(){
                iterations++ ;
                if(iterations == dice_number){
                    clearInterval(move);
                }
                piece_value[index] += 1;
                if(value<57){
                    piece[index].style.top = path[index_two][piece_value[index]].top;
                    piece[index].style.left = path[index_two][piece_value[index]].left;
                    for(j=0; j<4; j++){
                        changeClassFunc((j + (index_two*4)), "active", "inactive");
                    };
                }
                else if(value==57){
                    piece[index].style.top = goal_position[index].top;
                    piece[index].style.left = goal_position[index].left;
                    chance -=1;
                    document.getElementById("field").innerHTML = "YAY!! Bonus Chance!"
                    for(j=0; j<4; j++){
                        changeClassFunc((j + (index_two*4)), "active", "inactive");
                    };
                }
            }
            if(value>57){
                piece_value[index] -= dice_number;
            }
            kataFunction(value, index_two);
        }
    }
    switch(x){
        case 101:
            actualChange(0,0);
            break;
        case 102:
            actualChange(1,0);      
            break;
        case 103:
            actualChange(2,0);
            break;
        case 104: 
            actualChange(3,0);
            break;
        case 201:
            actualChange(4,1);
            break;
        case 202:
            actualChange(5,1);        
            break;
        case 203:
            actualChange(6,1);
            break;
        case 204: 
            actualChange(7,1);
            break;
        case 401:
            actualChange(8,2);
            break;
        case 402:
            actualChange(9,2);   
            break;
        case 403:
            actualChange(10,2);
            break;
        case 404: 
            actualChange(11,2);
            break;
        case 301:
            actualChange(12,3);
            break;
        case 302:
            actualChange(13,3);   
            break;
        case 303:
            actualChange(14,3);
            break;
        case 304: 
            actualChange(15,3);
            break;
        default:
            alert("no piece");
    }
}

